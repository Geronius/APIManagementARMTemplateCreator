{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "service_PreDemoTest_name": {
      "type": "string",
      "defaultValue": "PreDemoTest"
    },
    "service_PreDemoTest_sku_name": {
      "type": "string",
      "defaultValue": "Developer"
    },
    "service_PreDemoTest_sku_capacity": {
      "type": "string",
      "defaultValue": "1"
    },
    "service_PreDemoTest_location": {
      "type": "string",
      "defaultValue": "West Europe"
    },
    "service_PreDemoTest_publisherEmail": {
        "type": "string",
        "defaultValue": "mattias.logdberg@ibiz-solutions.se"
    },
    "service_PreDemoTest_publisherName": {
        "type": "string",
        "defaultValue": "ibiz"
    },
    "service_PreDemoTest_notificationSenderEmail": {
      "type": "string",
      "defaultValue": "apimgmt-noreply@mail.windowsazure.com"
    },
    "EchoV1_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "EchoV1_serviceUrl": {
      "type": "string",
      "defaultValue": "http://echoapi.cloudapp.net/api"
    },
    "EchoV1_apiVersion": {
      "type": "string",
      "defaultValue": "v1"
    },
    "EchoV1_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "httpBinAPI_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "httpBinAPI_serviceUrl": {
      "type": "string",
      "defaultValue": "https://httpbin.org"
    },
    "httpBinAPI_apiVersion": {
      "type": "string",
      "defaultValue": "v1"
    },
    "httpBinAPI_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_httpBinAPI_backendurl": {
      "type": "string",
      "defaultValue": "https://api.apis.guru/v2/"
    },
    "httpBinAPI-v2_apiRevision": {
      "type": "string",
      "defaultValue": "1"
    },
    "httpBinAPI-v2_serviceUrl": {
      "type": "string",
      "defaultValue": "https://httpbin.org"
    },
    "httpBinAPI-v2_apiVersion": {
      "type": "string",
      "defaultValue": "v2"
    },
    "httpBinAPI-v2_isCurrent": {
      "type": "bool",
      "defaultValue": true
    },
    "api_httpBinAPI-v2_backendurl": {
      "type": "string",
      "defaultValue": "https://api.apis.guru/v2/"
    }
  },
  "variables": {},
  "resources": [
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest",
      "type": "Microsoft.ApiManagement/service",
      "name": "[parameters('service_PreDemoTest_name')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "publisherEmail": "[parameters('service_PreDemoTest_publisherEmail')]",
        "publisherName": "[parameters('service_PreDemoTest_publisherName')]",
        "notificationSenderEmail": "[parameters('service_PreDemoTest_notificationSenderEmail')]",
        "hostnameConfigurations": [],
        "additionalLocations": null,
        "virtualNetworkConfiguration": null,
        "customProperties": {
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls10": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Tls11": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Protocols.Ssl30": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Ciphers.TripleDes168": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls10": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Tls11": "False",
          "Microsoft.WindowsAzure.ApiManagement.Gateway.Security.Backend.Protocols.Ssl30": "False"
        },
        "virtualNetworkType": "None"
      },
      "resources": [],
      "dependsOn": [],
      "sku": {
        "name": "[parameters('service_PreDemoTest_sku_name')]",
        "capacity": "[parameters('service_PreDemoTest_sku_capacity')]"
      },
      "location": "[parameters('service_PreDemoTest_location')]",
      "tags": {},
      "scale": null
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_PreDemoTest_name'), '/EchoV1')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Echo API",
        "apiRevision": "[parameters('EchoV1_apiRevision')]",
        "description": null,
        "serviceUrl": "[parameters('EchoV1_serviceUrl')]",
        "path": "echo",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('EchoV1_isCurrent')]",
        "apiVersion": "[parameters('EchoV1_apiVersion')]",
        "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'15f42e2c-9515-4867-bac4-4bd9b487321d')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/create-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'create-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Create resource",
            "method": "POST",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a POST call based on the echo backend above. The request body is expected to contain JSON-formatted data (see example below). A policy is used to automatically transform any request sent in JSON directly to XML. In a real-world scenario this could be used to enable modern clients to speak to a legacy backend.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": [
                {
                  "contentType": "application/json",
                  "sample": "{\r\n\t\"vehicleType\": \"train\",\r\n\t\"maxSpeed\": 125,\r\n\t\"avgSpeed\": 90,\r\n\t\"speedUnit\": \"mph\"\r\n}"
                }
              ]
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/create-resource/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'create-resource', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <json-to-xml apply=\"always\" consider-accept-header=\"false\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name') , 'EchoV1')]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_PreDemoTest_name'), 'EchoV1', 'create-resource')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/modify-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'modify-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Modify Resource",
            "method": "PUT",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a PUT call handled by the same \"echo\" backend as above. You can now specify a request body in addition to headers and it will be returned as well.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/remove-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'remove-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Remove resource",
            "method": "DELETE",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a DELETE call which traditionally deletes the resource. It is based on the same \"echo\" backend as in all other operations so nothing is actually deleted.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/retrieve-header-only",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'retrieve-header-only')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve header only",
            "method": "HEAD",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "The HEAD operation returns only headers. In this demonstration a policy is used to set additional headers when the response is returned and to enable JSONP.",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/retrieve-header-only/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'retrieve-header-only', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <set-header name=\"X-My-Sample\" exists-action=\"override\">\r\n      <value>This is a sample</value>\r\n      <!-- for multiple headers with the same name add additional value elements -->\r\n    </set-header>\r\n    <jsonp callback-parameter-name=\"ProcessResponse\" />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name') , 'EchoV1')]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_PreDemoTest_name'), 'EchoV1', 'retrieve-header-only')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/retrieve-resource",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'retrieve-resource')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve resource",
            "method": "GET",
            "urlTemplate": "/resource",
            "templateParameters": [],
            "description": "A demonstration of a GET call on a sample resource. It is handled by an \"echo\" backend which returns a response equal to the request (the supplied headers and body are being returned as received).",
            "request": {
              "queryParameters": [
                {
                  "name": "param1",
                  "description": "A sample parameter that is required and has a default value of \"sample\".",
                  "type": "string",
                  "defaultValue": "sample",
                  "required": true,
                  "values": [
                    "sample"
                  ]
                },
                {
                  "name": "param2",
                  "description": "Another sample parameter, set to not required.",
                  "type": "number",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "Returned in all cases.",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/retrieve-resource-cached",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'retrieve-resource-cached')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Retrieve resource (cached)",
            "method": "GET",
            "urlTemplate": "/resource-cached",
            "templateParameters": [],
            "description": "A demonstration of a GET call with caching enabled on the same \"echo\" backend as above. Cache TTL is set to 1 hour. When you make the first request the headers you supplied will be cached. Subsequent calls will return the same headers as the first time even if you change them in your request.",
            "request": {
              "queryParameters": [
                {
                  "name": "param1",
                  "description": "A sample parameter that is required and has a default value of \"sample\".",
                  "type": "string",
                  "defaultValue": "sample",
                  "required": true,
                  "values": [
                    "sample"
                  ]
                },
                {
                  "name": "param2",
                  "description": "Another sample parameter, set to not required.",
                  "type": "string",
                  "values": []
                }
              ],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [
            {
              "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/EchoV1/operations/retrieve-resource-cached/policies/policy",
              "type": "Microsoft.ApiManagement/service/apis/operations/policies",
              "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'EchoV1', '/', 'retrieve-resource-cached', '/', 'policy')]",
              "apiVersion": "2017-03-01",
              "properties": {
                "policyContent": "<policies>\r\n  <inbound>\r\n    <base />\r\n    <cache-lookup vary-by-developer=\"false\" vary-by-developer-groups=\"false\">\r\n      <vary-by-header>Accept</vary-by-header>\r\n      <vary-by-header>Accept-Charset</vary-by-header>\r\n    </cache-lookup>\r\n    <rewrite-uri template=\"/resource\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n    <cache-store duration=\"3600\" />\r\n  </outbound>\r\n</policies>"
              },
              "resources": [],
              "dependsOn": [
                "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
                "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name') , 'EchoV1')]",
                "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('service_PreDemoTest_name'), 'EchoV1', 'retrieve-resource-cached')]"
              ]
            }
          ],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'EchoV1')]"
          ]
        }
      ],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
        "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'15f42e2c-9515-4867-bac4-4bd9b487321d')]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/api-version-sets/15f42e2c-9515-4867-bac4-4bd9b487321d",
      "type": "Microsoft.ApiManagement/service/api-version-sets",
      "name": "[concat(parameters('service_PreDemoTest_name'),'/','15f42e2c-9515-4867-bac4-4bd9b487321d')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Echo API",
        "description": null,
        "versioningScheme": "Segment",
        "versionQueryName": null,
        "versionHeaderName": null
      },
      "resources": [],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_PreDemoTest_name'), '/httpBinAPI')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "HTTP Bin API",
        "apiRevision": "[parameters('httpBinAPI_apiRevision')]",
        "description": "API Management facade for a very handy and free online HTTP tool",
        "serviceUrl": "[parameters('httpBinAPI_serviceUrl')]",
        "path": "httpbin",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('httpBinAPI_isCurrent')]",
        "apiVersion": "[parameters('httpBinAPI_apiVersion')]",
        "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'versionset-httpbin-api')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI/operations/get",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI', '/', 'get')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Returns GET data.",
            "method": "GET",
            "urlTemplate": "/get",
            "templateParameters": [],
            "description": "Returns GET data.\n",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'httpBinAPI')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI/operations/post",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI', '/', 'post')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Returns POST data.",
            "method": "POST",
            "urlTemplate": "/post",
            "templateParameters": [],
            "description": "Returns POST data.\n",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'httpBinAPI')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI/policies/policy",
          "type": "Microsoft.ApiManagement/service/apis/policies",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI', '/', 'policy')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - Only the <forward-request> policy element can appear within the <backend> section element.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy position the cursor at the desired insertion point and click on the round button associated with the policy.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-backend-service base-url=\"https://api.apis.guru/v2/\" />\r\n    <rewrite-uri template=\"/metrics.json\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name') , 'httpBinAPI')]"
          ]
        }
      ],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
        "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'versionset-httpbin-api')]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/api-version-sets/versionset-httpbin-api",
      "type": "Microsoft.ApiManagement/service/api-version-sets",
      "name": "[concat(parameters('service_PreDemoTest_name'),'/','versionset-httpbin-api')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Versioned HTTP bin API",
        "description": "Version set for HTTP bin API",
        "versioningScheme": "Query",
        "versionQueryName": "api-version",
        "versionHeaderName": null
      },
      "resources": [],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI-v2",
      "type": "Microsoft.ApiManagement/service/apis",
      "name": "[concat(parameters('service_PreDemoTest_name'), '/httpBinAPI-v2')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "HTTP Bin API",
        "apiRevision": "[parameters('httpBinAPI-v2_apiRevision')]",
        "description": "API Management facade for a very handy and free online HTTP tool",
        "serviceUrl": "[parameters('httpBinAPI-v2_serviceUrl')]",
        "path": "httpbin",
        "protocols": [
          "https"
        ],
        "authenticationSettings": {
          "oAuth2": null,
          "openid": null
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "isCurrent": "[parameters('httpBinAPI-v2_isCurrent')]",
        "apiVersion": "[parameters('httpBinAPI-v2_apiVersion')]",
        "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'versionset-httpbin-api')]"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI-v2/operations/get",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI-v2', '/', 'get')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Returns GET data.",
            "method": "GET",
            "urlTemplate": "/get",
            "templateParameters": [],
            "description": "Returns GET data.\n",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'httpBinAPI-v2')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI-v2/operations/put",
          "type": "Microsoft.ApiManagement/service/apis/operations",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI-v2', '/', 'put')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "Returns PUT data.",
            "method": "PUT",
            "urlTemplate": "/put",
            "templateParameters": [],
            "description": "Returns PUT data.\n",
            "request": {
              "queryParameters": [],
              "headers": [],
              "representations": []
            },
            "responses": [
              {
                "statusCode": 200,
                "description": "OK",
                "representations": [],
                "headers": []
              }
            ],
            "policies": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name'),'httpBinAPI-v2')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/apis/httpBinAPI-v2/policies/policy",
          "type": "Microsoft.ApiManagement/service/apis/policies",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'httpBinAPI-v2', '/', 'policy')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "policyContent": "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - Only the <forward-request> policy element can appear within the <backend> section element.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy position the cursor at the desired insertion point and click on the round button associated with the policy.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\r\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n-->\r\n<policies>\r\n  <inbound>\r\n    <base />\r\n    <set-backend-service base-url=\"https://api.apis.guru/v2/\" />\r\n    <rewrite-uri template=\"/metrics.json\" />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n  <on-error>\r\n    <base />\r\n  </on-error>\r\n</policies>"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
            "[resourceId('Microsoft.ApiManagement/service/apis', parameters('service_PreDemoTest_name') , 'httpBinAPI-v2')]"
          ]
        }
      ],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
        "[resourceId('Microsoft.ApiManagement/service/api-version-sets',parameters('service_PreDemoTest_name'),'versionset-httpbin-api')]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/api-version-sets/versionset-httpbin-api",
      "type": "Microsoft.ApiManagement/service/api-version-sets",
      "name": "[concat(parameters('service_PreDemoTest_name'),'/','versionset-httpbin-api')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Versioned HTTP bin API",
        "description": "Version set for HTTP bin API",
        "versioningScheme": "Query",
        "versionQueryName": "api-version",
        "versionHeaderName": null
      },
      "resources": [],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/products/starter",
      "type": "Microsoft.ApiManagement/service/products",
      "name": "[concat(parameters('service_PreDemoTest_name'), '/starter')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "Starter",
        "description": "Include 3 APIs. Limited to 1 subscription per developer. Throttled at 3 calls per 10 second. Changing desc... FULLL DEPLOY",
        "terms": null,
        "subscriptionRequired": true,
        "approvalRequired": true,
        "subscriptionsLimit": 1,
        "state": "published"
      },
      "resources": [
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/products/starter/apis/httpBinAPI",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'starter', '/httpBinAPI')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "HTTP Bin API",
            "apiRevision": "1",
            "description": "API Management facade for a very handy and free online HTTP tool",
            "serviceUrl": "https://httpbin.org",
            "path": "httpbin",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true,
            "apiVersion": "v1",
            "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/api-version-sets', parameters('service_PreDemoTest_name'), 'versionset-httpbin-api')]"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_PreDemoTest_name'), 'starter')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/products/starter/apis/httpBinAPI-v2",
          "type": "Microsoft.ApiManagement/service/products/apis",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'starter', '/httpBinAPI-v2')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "HTTP Bin API",
            "apiRevision": "1",
            "description": "API Management facade for a very handy and free online HTTP tool",
            "serviceUrl": "https://httpbin.org",
            "path": "httpbin",
            "protocols": [
              "https"
            ],
            "authenticationSettings": null,
            "subscriptionKeyParameterNames": null,
            "isCurrent": true,
            "apiVersion": "v2",
            "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/api-version-sets', parameters('service_PreDemoTest_name'), 'versionset-httpbin-api')]"
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_PreDemoTest_name'), 'starter')]"
          ]
        },
        {
          "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/products/starter/groups/contosogroup",
          "type": "Microsoft.ApiManagement/service/products/groups",
          "name": "[concat(parameters('service_PreDemoTest_name'), '/', 'starter', '/contosogroup')]",
          "apiVersion": "2017-03-01",
          "properties": {
            "displayName": "ContosoGroup",
            "description": "Group containing all developers from Contoso who will be consuming our APIs",
            "builtIn": false,
            "type": "custom",
            "externalId": null
          },
          "resources": [],
          "dependsOn": [
            "[resourceId('Microsoft.ApiManagement/service/products', parameters('service_PreDemoTest_name'), 'starter')]"
          ]
        }
      ],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]",
        "[resourceId('Microsoft.ApiManagement/service/groups', parameters('service_PreDemoTest_name'), 'contosogroup')]"
      ]
    },
    {
      "comments": "Generated for resource /subscriptions/c107df29-a4af-4bc9-a733-f88f0eaa4296/resourceGroups/PreDemoTest/providers/Microsoft.ApiManagement/service/PreDemoTest/groups/contosogroup",
      "type": "Microsoft.ApiManagement/service/groups",
      "name": "[concat(parameters('service_PreDemoTest_name'), '/contosogroup')]",
      "apiVersion": "2017-03-01",
      "properties": {
        "displayName": "ContosoGroup",
        "description": "Group containing all developers from Contoso who will be consuming our APIs",
        "builtIn": false,
        "type": "custom",
        "externalId": null
      },
      "resources": [],
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service', parameters('service_PreDemoTest_name'))]"
      ]
    }
  ],
  "outputs": {}
}
